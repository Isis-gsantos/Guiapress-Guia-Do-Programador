<%- include ('../../partials/header.ejs') %>
<%- include ('../../partials/homenavbar.ejs') %>

<body>
    <div class="container">
        <hr>

        <% result.articles.rows.forEach(article => { %>
            <!-- os artigos estão dentro do result, por isso tive que chamar o result antes. Quando se trabalha com o método findAndCountAll() ele retorna 2 coisas que é a count (quantidade de elementos que tem) e as rows (que é basicamente a lista de artigos) -->
            <div class="card">
                <div class="card-header">
                    <h2><%= article.title %></h2>
                </div>

                <div class="card-body">
                    <a href="/<%= article.slug %>" class="btn btn-success">Ler artigo</a>
                </div>
            </div>
            <br>
        <% }) %>

        <div class="row">
            <div class="col col-12">
                <% if(result.page > 2) { %>
                    <a href="/articles/page/<%= result.page - 1 %>" style="float: left;">Preview</a>
                <% } else if (result.page == 2) { %>
                    <a href="/" style="float: left;">Preview </a>
                <% } %>

                <% if(result.next) { %>
                    <a href="/articles/page/<%= result.page + 1 %>" style="float: right;">Next >></a>
                <% } %>
            </div>
            <hr>
        </div>
        <hr>
    </div>
</body>

<%- include ('../../partials/footer.ejs') %>